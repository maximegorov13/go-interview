# Строки

Строки являются одним из ключевых типов данных в Go. Они представляют собой неизменяемые последовательности байт, обычно используемые для хранения текстовой информации в кодировке UTF-8.

**Внутренне строка в Go** — это срез байтов с фиксированной длиной, который нельзя изменять после создания.

## Неизменяемость

Строки в Go неизменяемы, то есть после создания их содержимое нельзя изменить. Это свойство обеспечивает безопасность при параллельных вычислениях, позволяя безопасно передавать строки между функциями и горутинами без необходимости синхронизации или блокировки. При любом изменении строки создается новая строка, а старая остается неизменной.

## Структура строки

Внутренне строка представлена структурой, содержащей два поля:

1. **Указатель на массив байт:** Ссылается на последовательность байтов в памяти.
2. **Длина строки:** Указывает количество байтов в строке.

Поскольку строка содержит только ссылку на байты и их длину, операции копирования строк являются легковесными — Go просто копирует указатель и длину, а не весь текст.

## Кодировка UTF-8

Строки в Go используют кодировку UTF-8, которая поддерживает большинство языков мира. Символы в строке могут занимать от 1 до 4 байт, в зависимости от их представления в UTF-8. Поэтому длина строки в Go (`len`) возвращает количество байт, а не символов.

## Работа с рунами

Руна (`rune`) — это тип данных, представляющий символ в кодировке Unicode. Фактически, это 32-битное целое число (`int32`). Преобразование строки в срез рун позволяет работать с символами как с отдельными единицами, что полезно при работе с многоязычными текстами.

## Изменение строки

Поскольку строки неизменяемы, для их изменения нужно использовать альтернативные подходы:

- **Срез рун:** Строку можно преобразовать в срез рун, изменить его содержимое, а затем снова преобразовать в строку.
- **Срез байтов:** Аналогично, преобразование строки в байты позволяет выполнять изменения на уровне байтов.
- **Строитель строк (`strings.Builder`):** Это эффективный инструмент для создания и изменения строк. Он накапливает содержимое без создания промежуточных строк, что снижает нагрузку на память и повышает производительность.

## Память и производительность

Работа со строками в Go спроектирована с учетом производительности:

- **Минимальное копирование:** Операции копирования строк копируют только указатель и длину, а не сами данные.
- **Сборка мусора:** Так как строки неизменяемы, они безопасно управляются сборщиком мусора.
- **Оптимизация конкатенации:** Использование `strings.Builder` помогает избежать создания временных объектов при объединении строк.
