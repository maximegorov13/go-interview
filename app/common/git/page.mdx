# Git

## Основные команды Git

### Инициализация репозитория

- **`git init`** — Инициализирует новый репозиторий Git.

### Работа с файлами

- **`git add <file>`** — Добавляет файл в область подготовки.
- **`git add .`** — Добавляет все файлы из текущей директории в область подготовки.
- **`git rm <file>`** — Удаляет файл из репозитория и индекса.
- **`git checkout -- <file>`** — Отменяет изменения в файле, возвращая его к состоянию последнего коммита.

### Создание коммитов

- **`git commit -m "message"`** — Создает новый коммит с указанным сообщением.
- **`git commit --amend -m "New message"`** — Изменяет последний коммит (например, исправление описания).
- **`git revert <commit>`** — Отменяет изменения, сделанные в указанном коммите.

### Просмотр истории изменений

- **`git status`** — Показывает текущий статус файлов (изменённые, подготовленные к коммиту и неотслеживаемые).
- **`git log`** — Отображает историю коммитов.
- **`git log -p`** — Показывает изменения, внесённые в каждом коммите.
- **`git show <commit>`** — Отображает изменения в указанном коммите.

### Работа с ветками

- **`git branch`** — Показывает список локальных веток.
- **`git branch -a`** — Показывает все ветки, включая удалённые.
- **`git branch <branch_name>`** — Создаёт новую ветку.
- **`git checkout <branch_name>`** — Переключается на указанную ветку.
- **`git switch <branch_name>`** — Переключается на указанную ветку.
- **`git checkout -b <branch_name>`** — Создаёт и переключается на новую ветку.
- **`git switch -c <branch_name>`** — Создаёт и переключается на новую ветку.
- **`git merge <branch_name>`** — Сливает указанную ветку в текущую.
- **`git merge --abort`** — Отменяет слияние в случае конфликта.
- **`git rebase <branch_name>`** — Переносит текущие коммиты на другую ветку.

### Работа с удалёнными репозиториями

- **`git remote add origin <url>`** — Добавляет удалённый репозиторий с именем `origin`.
- **`git push origin <branch>`** — Отправляет изменения в указанную ветку удалённого репозитория.
- **`git push --set-upstream origin <branch>`** — Устанавливает ветку как основную для `push/pull`.
- **`git pull origin <branch>`** — Получает изменения из удалённого репозитория и сливает их с текущей веткой.
- **`git fetch origin`** — Получает изменения из удалённого репозитория, но не сливает их.

### Работа с тегами

- **`git tag <tag_name>`** — Создаёт аннотированный тег для текущего коммита.
- **`git tag -a <tag_name> -m "message"`** — Создаёт тег с сообщением.
- **`git push origin <tag_name>`** — Отправляет тег в удалённый репозиторий.

### Игнорирование файлов

- **`.gitignore`** — Файл, содержащий правила исключения файлов из отслеживания.

### Полезные команды для отладки

- **`git diff`** — Показывает различия между изменениями в рабочей директории.
- **`git diff --staged`** — Показывает изменения, добавленные в область подготовки.
- **`git stash`** — Сохраняет текущие изменения в стек, очищая рабочую директорию.
- **`git stash apply`** — Восстанавливает сохранённые изменения из стека.
- **`git clean -f`** — Удаляет неотслеживаемые файлы из рабочей директории.

### Восстановление изменений

- **`git reset HEAD <file>`** — Убирает файл из области подготовки.
- **`git reset --soft <commit>`** — Возвращает ветку к указанному коммиту, сохраняя изменения в рабочей директории.
- **`git reset --hard <commit>`** — Возвращает ветку к указанному коммиту, удаляя все изменения.

### Работа с подмодулями

- **`git submodule add <repo_url>`** — Добавляет подмодуль в проект.
- **`git submodule update --init --recursive`** — Инициализирует и обновляет подмодули.

## Модель ветвления

[Удачная модель ветвления для Git](https://habr.com/ru/articles/106912/)

![Модель ветвления для Git](/images/git/branching_model.png)
