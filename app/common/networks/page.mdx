# Networks, HTTP(S), REST, gRPC

## Этапы обработки запроса:

1. Поиск в локальном кеше: Проверка ранее сохраненных данных.
2. Обращение к DNS серверу провайдера: Поиск IP-адреса сайта.
3. Рекурсивный поиск: Обращение к корневым серверам, зонам `.com`, DNS серверам домена.
4. Получение IP-адреса: Адрес передается браузеру.
5. Установка TCP-соединения: Происходит трёхстороннее рукопожатие (Handshake).
6. Отправка HTTP-запроса: Клиент отправляет запрос ресурса.
7. Получение HTTP-ответа: Ответ передается пользователю.

## Основные сетевые протоколы

### Протоколы передачи данных:

- Ethernet II: Канальный уровень передачи данных.
- IP (Internet Protocol): Основной сетевой протокол (IPv4/IPv6).
- ICMP (Internet Control Message Protocol): Управление соединениями (ping).
- UDP (User Datagram Protocol): Быстрая передача без подтверждения.
- TCP (Transmission Control Protocol): Надежная передача с подтверждением.
- DHCP (Dynamic Host Configuration Protocol): Назначение IP-адресов.
- DNS (Domain Name Service): Преобразование доменных имен в IP-адреса.

### Уровни сетевых протоколов (PDU - Protocol Data Unit):

| Уровень      | Название PDU       | Примеры         |
| ------------ | ------------------ | --------------- |
| Канальный    | Фрейм              | Ethernet        |
| Сетевой      | Пакет              | IP, ICMP        |
| Транспортный | Сегмент/Датаграмма | TCP, UDP        |
| Прикладной   | Сообщение          | HTTP, DNS, DHCP |

## IP-адресация и DNS

IP-адрес:

Уникальный идентификатор устройства в сети (например, `192.168.1.1`).

DNS (Domain Name System):

Служба, преобразующая доменные имена в IP-адреса. Например, `google.com -> 8.8.8.8`.

## MAC-адрес

Аппаратный адрес сетевого устройства, назначаемый производителем. Уникален для каждой сетевой карты.

## HTTP и HTTPS:

- HTTP: Протокол для передачи данных между клиентом и сервером.
- HTTPS: Защищенная версия HTTP с использованием шифрования SSL/TLS.

### 1xx - Информационные ответы

| Код | Название                       | Описание                                 |
| --- | ------------------------------ | ---------------------------------------- |
| 100 | Продолжить (Continue)          | Клиент может продолжать отправку данных. |
| 101 | Переключение протоколов        | Сервер меняет используемый протокол.     |
| 103 | Ранние подсказки (Early Hints) | Предварительная загрузка ресурсов.       |

### 2xx - Успешные ответы

| Код | Название                     | Описание                             |
| --- | ---------------------------- | ------------------------------------ |
| 200 | ОК (OK)                      | Запрос выполнен успешно.             |
| 201 | Создано (Created)            | Новый ресурс был создан на сервере.  |
| 202 | Принято (Accepted)           | Запрос принят, но еще не обработан.  |
| 204 | Нет содержимого (No Content) | Запрос выполнен без возврата данных. |

### 3xx - Перенаправление

| Код | Название              | Описание                                 |
| --- | --------------------- | ---------------------------------------- |
| 301 | Перемещено навсегда   | Ресурс перемещен на другой URL.          |
| 302 | Временное перемещение | Ресурс временно доступен по другому URL. |
| 304 | Нет изменений         | Кэшированные данные актуальны.           |

### 4xx - Ошибки клиента

| Код | Название               | Описание                               |
| --- | ---------------------- | -------------------------------------- |
| 400 | Неправильный запрос    | Сервер не может обработать запрос.     |
| 401 | Неавторизован          | Требуется аутентификация пользователя. |
| 403 | Запрещено              | Доступ к ресурсу запрещен.             |
| 404 | Не найдено             | Ресурс отсутствует на сервере.         |
| 429 | Слишком много запросов | Превышено ограничение на запросы.      |

### 5xx - Ошибки сервера

| Код | Название                  | Описание                          |
| --- | ------------------------- | --------------------------------- |
| 500 | Внутренняя ошибка сервера | Непредвиденная ошибка на сервере. |
| 503 | Сервис недоступен         | Сервер временно перегружен.       |
| 504 | Время ожидания истекло    | Сервер не ответил вовремя.        |

## TCP и UDP: Основные различия

| Критерий        | TCP (Transmission Control Protocol)   | UDP (User Datagram Protocol)                     |
| --------------- | ------------------------------------- | ------------------------------------------------ |
| Доставка данных | Надежная, с подтверждением доставки   | Ненадежная, без подтверждения                    |
| Упорядоченность | Обеспечивает порядок пакетов          | Не гарантирует порядок                           |
| Контроль ошибок | Контроль ошибок с повторной отправкой | Отсутствие контроля ошибок                       |
| Скорость        | Медленнее из-за проверок              | Быстрее благодаря минимальным накладным расходам |
| Примеры         | Веб-сайты, банки, электронная почта   | Онлайн-видео, звонки, игры                       |

## REST API и gRPC

### REST API

REST API (Representational State Transfer) — это архитектурный стиль, используемый для взаимодействия между клиентом и сервером через HTTP-запросы.
Основные принципы REST:

1. Клиент-серверная модель: Разделение между клиентом и сервером.
2. Отсутствие состояния: Сервер не хранит информацию о предыдущих запросах.
3. Кэширование: Позволяет ускорить ответы сервера.
4. Единый интерфейс: Упрощает разработку благодаря стандартизированным методам.
5. Многоуровневая система: Поддержка балансировщиков нагрузки и прокси-серверов.

### gRPC

- gRPC (Google Remote Procedure Call): Современный фреймворк удалённого вызова процедур (RPC), работающий поверх HTTP/2.
- Использует: Protocol Buffers (Protobuf) для бинарной передачи данных.

### Основные элементы gRPC:

| Элемент    | Описание                           |
| ---------- | ---------------------------------- |
| `syntax`   | Версия синтаксиса (`proto3`)       |
| `service`  | Объявление сервиса                 |
| `rpc`      | Описание методов                   |
| `message`  | Структура данных (аналог классов)  |
| `enum`     | Перечисления                       |
| `repeated` | Поля с повторяющимися значениями   |
| `oneof`    | Поля с одним из возможных значений |

---

## Ключевые вопросы

### В чем разница между TCP и UDP?

TCP — надежный протокол с подтверждением доставки, используется для веб-сайтов и почты. UDP — легковесный протокол без подтверждения, применим в онлайн-играх и видеозвонках.

### Что такое HTTP?

HTTP — протокол передачи гипертекста, обеспечивающий обмен данными между клиентом и сервером. Работает на уровне приложений, передает данные в виде текстовых сообщений через TCP.

### В чем отличия HTTP 1.1 и HTTP 2?

HTTP/2 быстрее благодаря мультиплексированию, сжатию заголовков и бинарной передаче данных. HTTP/1.1 передает данные последовательно, открывая несколько соединений.

### В чем отличия HTTP и HTTPS?

HTTP — незащищенный протокол, работающий на порте 80. HTTPS использует шифрование SSL/TLS, обеспечивая защиту данных, и работает на порте 443.

### Как произвести дебаг ProtoBuf?

Используйте команды `protoc --decode` и `protoc --encode`, инструменты `grpcurl` или встроенные отладчики в IDE для тестирования и декодирования данных.

### Что такое NAT?

NAT (Network Address Translation) — технология преобразования частных IP-адресов в публичные. Используется для подключения локальных сетей к Интернету.

### Какие бывают версии HTTP?

Существуют версии HTTP: 0.9, 1.0, 1.1, 2 и 3. Наиболее популярны HTTP/1.1, HTTP/2 и недавно выпущенный HTTP/3.

### Что такое HTTPS?

HTTPS — защищённая версия HTTP, обеспечивающая конфиденциальность, целостность и аутентификацию данных через SSL/TLS.

### Есть ли отличия между SSL и TLS?

TLS — более современная версия SSL. TLS безопаснее, быстрее и поддерживает актуальные криптографические алгоритмы.

### Что такое SSL?

SSL (Secure Sockets Layer) — устаревший протокол шифрования, защищающий данные между клиентом и сервером. Заменен на TLS.

### Что можно сказать о HTTP/3?

HTTP/3 работает поверх протокола QUIC, который заменяет TCP. Он быстрее, поддерживает встроенное шифрование и устраняет задержки, связанные с установкой соединений.

### Что такое TLS?

TLS (Transport Layer Security) — современный протокол шифрования, обеспечивающий безопасное соединение между клиентом и сервером. Используется в HTTPS, защищая передаваемые данные.
