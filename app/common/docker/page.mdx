# Docker

## Что такое Docker?

- Платформа для разработки, доставки и запуска приложений в контейнерах.
- Позволяет упаковывать приложение и его зависимости в стандартизированные контейнеры, обеспечивая изоляцию и воспроизводимость.
- Используется для упрощения развертывания приложений на разных средах — локально, в облаке или на серверах.

## Контейнеры Docker

- Легковесная и изолированная среда выполнения приложения.
- Используют ядро операционной системы хоста, поэтому занимают меньше ресурсов, чем виртуальные машины.
- Включают всё необходимое для работы приложения: библиотеки, зависимости и код.

## Чем контейнеры отличаются от виртуальных машин?

1. **Контейнеры**:
   - Делят ядро ОС хоста.
   - Быстрее запускаются и занимают меньше ресурсов.
   - Менее изолированы.
2. **Виртуальные машины**:
   - Эмулируют полный сервер, включая гостевую ОС.
   - Больше изоляции, но требуют больше ресурсов и времени на запуск.

## Docker-образ

- Шаблон для создания контейнера.
- Состоит из слоёв, каждый из которых добавляет изменения или файлы.
- Неизменяемый — изменения не влияют на исходный образ.

## Чем Docker-образ отличается от контейнера?

- **Образ (Image)**:
  - Это статический шаблон, только для чтения.
  - Содержит инструкции для создания контейнера.
- **Контейнер**:
  - Это запущенный экземпляр образа.
  - Может иметь свои данные, которые изменяются в процессе работы.

## Компоненты Docker

1. **Docker Engine** — основной компонент для управления контейнерами.
2. **Docker Hub** — облачный реестр для хранения образов.
3. **Docker Compose** — инструмент для управления многоконтейнерными приложениями.
4. **Docker Swarm и Kubernetes** — инструменты оркестрации контейнеров.

## Stateful и Stateless приложения

- **Stateful**:
  - Сохраняют состояние между запросами.
  - Пример: база данных или приложения с сессиями.
  - Труднее масштабировать из-за необходимости синхронизации состояния.
- **Stateless**:
  - Не хранят состояния, каждый запрос обрабатывается независимо.
  - Легко масштабируются и тестируются.

## Команды Docker и их назначение

1. **Работа с образами**:
   - `docker pull` — загрузка образа из реестра.
   - `docker images` — список локальных образов.
   - `docker rmi` — удаление образа.
2. **Работа с контейнерами**:
   - `docker run` — запуск контейнера из образа.
   - `docker ps` — список запущенных контейнеров.
   - `docker stop` — остановка контейнера.
   - `docker rm` — удаление контейнера.
3. **Мониторинг и управление**:
   - `docker logs` — просмотр логов контейнера.
   - `docker stats` — мониторинг ресурсов.
   - `docker inspect` — детальная информация о контейнере.
4. **Сетевое взаимодействие**:
   - `docker network create` — создание сети.
   - `docker network ls` — список сетей.
5. **Управление данными**:
   - `docker volume create` — создание тома.
   - `docker volume ls` — список томов.

## Преимущества Docker

- Ускоряет процесс разработки и развертывания приложений.
- Обеспечивает консистентность окружения на всех этапах разработки.
- Облегчает управление микросервисами.
- Уменьшает затраты на ресурсы в сравнении с виртуальными машинами.

## Недостатки Docker

- Меньшая степень изоляции по сравнению с виртуальными машинами.
- Потребность в дополнительных инструментах для мониторинга и оркестрации.
- Зависимость от ядра ОС хоста может быть уязвимостью.

## Ключевые вопросы

### Что такое Docker-образ?

- Это шаблон, содержащий всё необходимое для запуска приложения: код, зависимости, библиотеки и настройки.
- Docker-образ неизменяемый, создаётся на основе инструкций в Dockerfile.

### Чем Docker-образ отличается от контейнера?

- Образ — это статический файл (шаблон), а контейнер — это запущенный экземпляр образа, который можно использовать и изменять.

### Какие инструменты используются для управления контейнерами?

- Docker Compose — управление многоконтейнерными приложениями.
- Kubernetes — оркестрация контейнеров.
- Docker Swarm — встроенная система оркестрации Docker.

### Как работает сетевое взаимодействие между контейнерами?

- Через Docker Networks. Контейнеры могут взаимодействовать друг с другом в одной сети, используя имена хостов вместо IP.

### Как хранить данные, чтобы они не терялись при остановке контейнера?

- Используются Docker volumes или bind mounts для хранения данных вне контейнера.

### Что такое stateless и stateful приложения?

- Stateless — не хранят состояние, легко масштабируются.
- Stateful — сохраняют состояние, сложнее масштабировать.

### Как обновить контейнер?

- Пересобрать образ, остановить старый контейнер и запустить новый на основе обновлённого образа.

### Что такое Dockerfile и зачем он нужен?

- Текстовый файл с инструкциями для сборки образа.
- Упрощает создание стандартных образов.

### Как Docker обеспечивает изоляцию?

- Использует пространства имён (namespaces) для изоляции процессов и контроль групп (cgroups) для управления ресурсами.

### Какие ограничения у Docker?

- Безопасность (меньшая изоляция).
- Завязка на ядро ОС.
- Усложнённый мониторинг и управление при большом числе контейнеров.
