# SQL/NoSQL

## SQL

SQL-базы данных – это реляционные базы данных, которые организуют данные в таблицы с фиксированной структурой.

### Основные характеристики SQL-баз данных

1. **Реляционная структура:** данные организованы в виде связанных таблиц.
2. **Жёсткая схема:** требуется заранее определить структуру таблиц (столбцы и их типы данных).
3. **Поддержка ACID:** транзакции гарантируют атомарность, согласованность, изоляцию и долговечность данных.
4. **SQL-запросы:** используются для извлечения, вставки, обновления и удаления данных.

### Основные типы ключей

- **Primary Key (первичный ключ):** уникально идентифицирует каждую строку в таблице.
- **Foreign Key (внешний ключ):** устанавливает связь между двумя таблицами, ссылаясь на первичный ключ другой таблицы.

### Основные команды SQL

- **SELECT:** выборка данных из таблиц.
- **INSERT:** добавление новых данных.
- **UPDATE:** изменение существующих данных.
- **DELETE:** удаление данных.
- **CREATE TABLE:** создание таблицы.
- **ALTER TABLE:** изменение структуры таблицы.
- **DROP TABLE:** удаление таблицы.

### Оптимизация SQL-запросов

1. **EXPLAIN:** показывает план выполнения запроса (порядок сканирования таблиц, использование индексов).
2. **ANALYZE:** собирает статистику о таблицах для оптимизации запросов.
3. **Индексы:** ускоряют поиск данных в таблице.
4. **Нормализация:** уменьшает избыточность данных и поддерживает их целостность.

## Транзакции

Обеспечивают целостность данных при выполнении нескольких операций:

- **BEGIN TRANSACTION:** начало транзакции.
- **COMMIT:** фиксация изменений.
- **ROLLBACK:** откат изменений.

### **Преимущества SQL-баз данных:**

- Надёжность и согласованность данных.
- Простота выполнения сложных запросов (JOIN, GROUP BY, HAVING).
- Поддержка строгих транзакций (ACID).

### **Недостатки SQL-баз данных:**

- Неэффективность при работе с большими объёмами нереляционных данных.
- Сложность масштабирования в горизонтальном направлении.

### **NoSQL (Not Only SQL)**

NoSQL-базы данных – это нереляционные базы данных, разработанные для хранения больших объёмов данных и обеспечения гибкости при их обработке.

### **Основные типы NoSQL-баз данных:**

1. **Key-Value (ключ-значение):**

- Пример: Redis, DynamoDB.
- Подходят для кеширования, сессий, работы с конфигурациями.

2. **Документные:**

- Пример: MongoDB, CouchDB.
- Хранят данные в формате JSON или BSON.
- Гибкость структуры: каждое поле может иметь свой набор ключей.

3. **Колонночные:**

- Пример: Cassandra, HBase.
- Оптимизированы для работы с большими объёмами данных и аналитики.

4. **Графовые:**

- Пример: Neo4j, ArangoDB.
- Хранят связи между объектами (графы).

### **Основные характеристики NoSQL-баз данных:**

- **Гибкость схемы:** данные можно изменять динамически, без необходимости изменять всю структуру базы.
- **Масштабируемость:** легко масштабируются горизонтально.
- **BASE (Basic Availability, Soft state, Eventual consistency):** менее строгие требования к консистентности, чем ACID.

### **Примеры использования NoSQL:**

- Хранение данных пользователя (JSON-документы).
- Кеширование данных (Redis).
- Работа с большими данными и аналитикой (Cassandra).
- Управление связями (графовые базы данных).

### **Сравнение SQL и NoSQL**

| Характеристика       | SQL                              | NoSQL                                |
| -------------------- | -------------------------------- | ------------------------------------ |
| Структура данных     | Фиксированная (таблицы, строки). | Гибкая (JSON, графы, ключ-значение). |
| Масштабируемость     | Вертикальная.                    | Горизонтальная.                      |
| Поддержка транзакций | ACID.                            | BASE (чаще Eventual consistency).    |
| Примеры систем       | PostgreSQL, MySQL, Oracle.       | MongoDB, Cassandra, Redis.           |
| Лучше подходит для   | Строгих транзакций, аналитики.   | Больших данных, динамических схем.   |

## Redis – пример NoSQL базы данных

**Redis** – это база данных типа ключ-значение, которая хранит данные в оперативной памяти, что обеспечивает высокую скорость доступа.

### **Основные возможности Redis:**

1. **Кеширование:** идеально подходит для временного хранения часто запрашиваемых данных.
2. **Срок жизни данных (TTL):** можно задать время, после которого запись будет удалена.
3. **Перезапуск:** сохраняет данные на диск и восстанавливает их при перезапуске.
4. **Геопозиции:** поддерживает работу с геоданными.
5. **Очереди и обработка задач:** может использоваться как брокер сообщений.

### **Преимущества Redis:**

- Высокая производительность.
- Простота использования.
- Гибкость благодаря поддержке различных структур данных (строки, списки, множества, хэши).

### **Недостатки Redis:**

- Ограничен объёмом оперативной памяти.
- Менее надёжен для долгосрочного хранения данных.

### **Когда использовать SQL и NoSQL**

**SQL:**

- Данные связаны и структура стабильна.
- Требуются сложные запросы (JOIN).
- Необходимы строгие транзакции (например, финансы).

**NoSQL:**

- Данные динамические или неструктурированные.
- Высокая скорость обработки или большой объём данных.
- Масштабируемость важнее строгой консистентности.
